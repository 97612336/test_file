<h2>read_nginx_log_to_db.py脚本文档</h2>

<h5>用途:</h5>
<p>使用脚本读取昨天的世界杯活动相关的日志文件,并存入到数据库中,统计用户行为</p>

<h5>总逻辑:</h5>
解析所有的以"l.access.log"开头的文件,如果该文件日期能够在数据库中查询到,就不对这个日志文件进行存入到数据库的操作<br>



<h5>详细逻辑:</h5>
1.获取该文件所在文件夹下的所有文件名和文件路径名,判断该文件的文件名中是否包含"-",如果包含,就把该文件的路径名存入到列表中<br>
2.获取当前日期年月日组成的数字,然后遍历1步骤中的文件路径名列表,并获取每个路径的年月日组成的数字.如果两个数字相等的话,就执行3步骤<br>
3.如果两个日期数字相等,那么则读取这个日志文件,并通过正则表达式获取日志文件中符合条件的字符串<br>
4.进一步解析符合条件的字符串,得到一个key值为time和action的字典<br>
5.对这个字典执行插入到数据库的操作,保存到数据库中<br>
6.读取数据库中的数据,并展示在车友选管理后台的页面中<br>

<h5>需要用到的包</h5>
1.configparser<br>
2.os<br>
3.re<br>
4.time<br>
5.datetime<br>
6.pymysql<br>

<h5>数据库相关</h5>
1.存入的数据库表名:user_info<br>
2.存入的字段:<br>
(1)is_login<br>
(2)uuid<br>
(3)do_time<br>
(4)location<br>
(5)operate_name<br>


